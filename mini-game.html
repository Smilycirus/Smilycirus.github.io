<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiberium Clicker</title>
<style>
body { margin:0; background:#111; color:#0f0; font-family:Arial, sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; padding-top:20px; }
button { font-size:16px; padding:10px; margin:5px; background:#222; color:#0f0; border:2px solid #0f0; cursor:pointer; }
#stats { margin-top:10px; }
#buildings { margin-top:20px; display:flex; flex-wrap:wrap; justify-content:center; }
.building { border:1px solid #0f0; padding:10px; margin:5px; }
.upgrades { margin-top:20px; }
</style>
</head>
<body>

<h1>Tiberium Clicker</h1>
<button id="clickButton">Harvest Tiberium (+<span id="clickPower">1</span>)</button>
<div id="stats">
  <div>Tiberium: <span id="tiberium">0</span></div>
  <div>TPS: <span id="tps">0</span></div>
</div>
<div id="buildings"></div>
<div class="upgrades" id="upgrades"></div>

<script>
// ===== Game State =====
let gameData = {
    tiberium: 0,
    clickPower: 1,
    buildings: {},
    upgrades: {},
    goldenTiberiumActive: false
};

const buildingTypes = [
    {name:'Harvester', baseCost:10, tps:1},
    {name:'Refinery', baseCost:100, tps:10},
    {name:'Lab', baseCost:1000, tps:80},
    {name:'Crystal', baseCost:10000, tps:470}
];

const upgradeTypes = [
    {name:'Click Booster', cost:50, effect:'clickPower', multiplier:2, unlocked:false},
    {name:'Harvester Efficiency', cost:500, effect:'Harvester', multiplier:2, unlocked:false}
];

// Load saved game
if(localStorage.getItem('tiberiumClicker')){
    gameData = JSON.parse(localStorage.getItem('tiberiumClicker'));
}

// ===== UI Setup =====
const tiberiumDisplay = document.getElementById('tiberium');
const tpsDisplay = document.getElementById('tps');
const clickPowerDisplay = document.getElementById('clickPower');
const buildingsDiv = document.getElementById('buildings');
const upgradesDiv = document.getElementById('upgrades');

// Initialize buildings
buildingTypes.forEach(b=>{
    if(!gameData.buildings[b.name]) gameData.buildings[b.name]={count:0,cost:b.baseCost};
    let div = document.createElement('div');
    div.className='building';
    div.id='building-'+b.name;
    div.innerHTML=`<strong>${b.name}</strong><br>Owned: <span class='count'>${gameData.buildings[b.name].count}</span><br>Cost: <span class='cost'>${gameData.buildings[b.name].cost}</span><br><button onclick='buyBuilding("${b.name}")'>Buy</button>`;
    buildingsDiv.appendChild(div);
});

// Initialize upgrades
upgradeTypes.forEach(u=>{
    if(!gameData.upgrades[u.name]) gameData.upgrades[u.name]={owned:false};
    let div = document.createElement('div');
    div.className='building';
    div.id='upgrade-'+u.name;
    div.innerHTML=`<strong>${u.name}</strong><br>Cost: ${u.cost}<br><button onclick='buyUpgrade("${u.name}")'>Buy</button>`;
    upgradesDiv.appendChild(div);
});

// ===== Game Logic =====
function updateDisplay(){
    tiberiumDisplay.textContent = Math.floor(gameData.tiberium);
    clickPowerDisplay.textContent = gameData.clickPower;
    let totalTPS=0;
    buildingTypes.forEach(b=>{
        totalTPS += (gameData.buildings[b.name].count * b.tps);
        let div=document.getElementById('building-'+b.name);
        div.querySelector('.count').textContent=gameData.buildings[b.name].count;
        div.querySelector('.cost').textContent=Math.floor(gameData.buildings[b.name].cost);
    });
    tpsDisplay.textContent=totalTPS;
}

function buyBuilding(name){
    let b = buildingTypes.find(x=>x.name===name);
    if(gameData.tiberium>=gameData.buildings[name].cost){
        gameData.tiberium -= gameData.buildings[name].cost;
        gameData.buildings[name].count++;
        gameData.buildings[name].cost = Math.floor(gameData.buildings[name].cost * 1.15);
        updateDisplay();
        saveGame();
    }
}

function buyUpgrade(name){
    let u = upgradeTypes.find(x=>x.name===name);
    if(gameData.tiberium>=u.cost && !gameData.upgrades[name].owned){
        gameData.tiberium -= u.cost;
        gameData.upgrades[name].owned=true;
        if(u.effect==='clickPower') gameData.clickPower *= u.multiplier;
        else gameData.buildings[u.effect].count *= u.multiplier;
        document.getElementById('upgrade-'+name).style.display='none';
        updateDisplay();
        saveGame();
    }
}

document.getElementById('clickButton').addEventListener('click',()=>{
    gameData.tiberium += gameData.clickPower;
    updateDisplay();
    saveGame();
});

// Auto-generate Tiberium
setInterval(()=>{
    buildingTypes.forEach(b=>{
        gameData.tiberium += gameData.buildings[b.name].count * b.tps;
    });
    updateDisplay();
    saveGame();
},1000);

// Golden Tiberium Event
setInterval(()=>{
    if(Math.random()<0.01 && !gameData.goldenTiberiumActive){
        gameData.goldenTiberiumActive=true;
        alert('Golden Tiberium appeared! Click Harvest quickly for bonus!');
        setTimeout(()=>{gameData.goldenTiberiumActive=false;},5000);
    }
},1000);

function saveGame(){
    localStorage.setItem('tiberiumClicker', JSON.stringify(gameData));
}

updateDisplay();
</script>

</body>
</html>
